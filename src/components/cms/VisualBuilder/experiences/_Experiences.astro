---
import {gql, request} from "graphql-request";
import {CommonData} from "../../../common/CommonData";
import Elements from "../elements/_Elements.astro";
import {optiSdk} from "../../../../services/graphql/getSdk";
const data = Astro.props.data as CommonData;

const optiResponse = await optiSdk.getExperience(
    {key: data.key, version: data.version, locale: data.locale}
);

const experiences = optiResponse?._Experience?.items;
const experience: any = experiences[experiences.length - 1];
console.log(experiences);
---

<!--<h1 class="text-gray-300">Experiences</h1>-->
<div className="relative w-full flex-1 vb:outline">
    <div className="relative w-full flex-1 vb:outline">
        {
            experience?.composition?.grids?.map((grid: any) => (
                    <div
                            className="relative w-full flex flex-col flex-nowrap justify-start vb:grid"
                            data-epi-block-id={grid.key}
                    >
                        <!--<p class="text-gray-500">{grid.displayName}</p>-->
                        {grid.rows?.map((row: any) => (
                                <div className="flex-1 flex flex-row flex-nowrap justify-start vb:row"
                                     data-epi-block-id={row.key}>
                                    <!--<p>{row.displayName}</p>-->
                                    {row.columns?.map((column: any) => (
                                            <div
                                                    className="flex-1 flex flex-col flex-nowrap justify-start vb:col"
                                                    data-epi-block-id={column.key}
                                            >
                                                <!--<p>{column.displayName}</p>-->
                                                {column.elements?.map((element: any) => (
                                                        <div data-epi-block-id={element?.key}>
                                                            <Elements element={element}/>
                                                        </div>
                                                ))}
                                            </div>
                                    ))}
                                </div>
                        ))}
                    </div>
            ))
        }
    </div>
</div>
